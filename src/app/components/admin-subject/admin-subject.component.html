<div class=background>

<div class = "containter">
  <br/>
  <br/>
  <h1 style="text-align: center;font-size: 40px;"> Manage subjects</h1>
  <br/>
  <br/>


  <div class = "row" style="width: 100%;">
    <div class = "col-md-3" style="text-align: center;">
      <a class = "btn btn-primary" (click)="setOption(0)"> Create a subject </a>
    </div>
    <div class="col-md-3" style="text-align: center;">
      <a class = "btn btn-primary" (click)="setOption(1)"> Update a subject </a>
    </div>
    <div class="col-md-3" style="text-align: center;">
      <a class = "btn btn-primary" (click)="setOption(2)"> Delete a subject </a>
    </div>
    <div class="col-md-3" style="text-align: center;">
      <a class = "btn btn-primary" (click)="setOption(3)"> Add a student to a subject </a>
    </div>
  </div>

  <br/>
  <br/>
  <div *ngIf = "create">
    <div class = "row" style="width: 100%;">
      <h1 style="text-align: center;font-size: 40px;"> Create a subject</h1>
    </div>

    <br/>

    <div class = "row" style="width: 100%;">
      <div class="col-md-2" style="text-align: center;">

      </div>
      <div class="col-md-8" style="text-align: left;">

        <form class="clr-form" [formGroup]="subjectCreateForm">
        <table class= "table table-dark" style="width:100%;color:white">
          <tr>
            <td style="font-size: 20px;">Subject name:</td>
            <td><input type="text"  name="subjectCreateForm.name" placeholder="Subject name"
              formControlName="name"  required ></td>
          </tr>
          <tr>
            <td style="font-size: 20px;">Semester:</td>
            <td><input type="text" name="subjectCreateForm.semester" placeholder="Semester where this subject is being held"
              formControlName="semester"  required></td>
          </tr>
          <tr>
            <td style="font-size: 20px;">
              Type of subject:
            </td>
            <td>
              <input type="radio" value="Obavezan" style="width: 25%" checked  name="type" formControlName="type" >  Compulsory
              <input type="radio" value="Izborni" style="width: 25%" name="type" formControlName="type">  Elective
            </td>
          </tr>
          <tr>
            <td style="font-size: 20px;">
              Class at studies:
            </td>
            <td>
              <input type="radio"  name="studies" formControlName="studies" value="Osnovne" style="width: 25%" >  Bachelor
              <input type="radio"  name="studies" formControlName="studies" value="Master" style="width: 25%">  Master
            </td>
          </tr>
          <tr>
            <td style="font-size: 20px;"> Department:</td>
            <td> <input type="text" name="subjectCreateForm.department" placeholder="Department"
              formControlName="department"  required> </td>
          </tr>
          <tr>
            <td style="font-size: 20px;">Subject code:</td>
            <td> <input type="text" name="subjectCreateForm.code" placeholder="Code"
              formControlName="code"  required> </td>
          </tr>
          <tr>
            <td style="font-size: 20px;">Class fond:</td>
            <td> <input type="text" name="subjectCreateForm.fond" placeholder="Fond"
              formControlName="fond"  required> </td>
          </tr>
          <tr>
            <td style="font-size: 20px;">ESPB:</td>
            <td> <input type="text" name="subjectCreateForm.espb" placeholder="ESPB"
              formControlName="espb"  required> </td>
          </tr>
          <tr>
            <td style="width: 100%;" colspan = 2>
              <div style="width: 100%;font-size: 20px;background-color: transparent;">Goal of this subject:</div>
              <textarea style="width: 100%;height:100px;color:white" name="subjectCreateForm.goal" placeholder="Goal of this subject"
              formControlName="goal"  required></textarea>
            </td>
          </tr>
          <tr>
            <td style="font-size: 20px;">Propositions:</td>
            <td> <input type="text" name="subjectCreateForm.propositions" placeholder="Propositions for this subject"
              formControlName="propositions"  required> </td>
          </tr>
          <tr>
            <td style="font-size: 20px;">Lab:</td>
            <td><input type="text" name="subjectCreateForm.lab" placeholder="Lab (Leave empty if no lab)"
              formControlName="lab"  required></td>
          </tr>
          <tr>
            <td colspan="2" style="text-align: center;">
              <button class="btn btn-primary" (click)= "createSubject()">Create subject</button>
            </td>
          </tr>
          <tr *ngIf="showErrorMessage">
              <td colspan="2" style="color:red;text-align: center;font-size: 30px;background-color: white;">
                Please enter all the fields to proceed!
              </td>
          </tr>
        </table>
        </form>
      </div>
      <div class="col-md-2" style="text-align: center;">

      </div>
    </div>
  </div>

  <div *ngIf = "update">
      <div class = "row" style="width: 100%;">
        <h1 style="text-align: center;font-size: 40px;"> Update a subject</h1>
      </div>
      <br/>
      <br/>
      <br/>
      <div class = "row" style="width: 100%;">
        <h1 style="text-align: center;font-size: 20px;"> Please enter the code of the subject you want to update</h1>
      </div>
      <div class = "row" style="width: 100%;">
        <div class="col-md-3" style="text-align: center;">

        </div>
        <div class="col-md-6" style="text-align: left;color:black">
          <select class="form-select" [(ngModel)] = "findSubjectName" style="width: 100%;">
            <option value="null">Select your option</option>
            <option *ngFor ="let sub of subjects" [value]="sub.code">
              {{nameOf(sub.code)}}
            </option>
          </select>
        </div>
        <div class="col-md-3" style="text-align: center;">

        </div>
      </div>
      <br/>
      <div class = "row" style="width: 100%;">
        <div class="col-md-5" style="text-align: center;">

        </div>
        <div class="col-md-2" style="text-align: left;">
          <button class="btn btn-danger" style="width: 100%;background-color: indigo;" (click)="getThisSubject()">Update this subject</button>
        </div>
        <div class="col-md-5" style="text-align: center;">

        </div>
      </div>
      <br/>
      <br/>
      <div *ngIf = "subject != null">
      <div class="row" style="width: 100%;">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <table class="table table-dark" style="width:100%">
            <tr>
              <td>Name:</td>
              <td><input type="text" [(ngModel)]="subject.name"></td>
            </tr>
            <tr>
              <td>Semester:</td>
              <td><input type="text" [(ngModel)]="subject.semester"></td>
            </tr>
            <tr>
              <td>Type:</td>
              <td><input type="text" [(ngModel)]="subject.type"></td>
            </tr>
            <tr>
              <td>Type of studies:</td>
              <td><input type="text" [(ngModel)]="subject.studies"></td>
            </tr>
            <tr>
              <td>Department:</td>
              <td><input type="text" [(ngModel)]="subject.department"></td>
            </tr>
            <tr>
              <td>Fond:</td>
              <td><input type="text" [(ngModel)]="subject.fond"></td>
            </tr>
            <tr>
              <td>ESPB:</td>
              <td><input type="text" [(ngModel)]="subject.espb"></td>
            </tr>
            <tr colspan='2'>
              <td colspan='2' style="width: 100%;" >Goal:
                <textarea type="text" [(ngModel)]="subject.goal" style="width: 100%;color:white"></textarea></td>
            </tr>
            <tr>
              <td>Propositions:</td>
              <td><input type="text" [(ngModel)]="subject.propositions"></td>
            </tr>
            <tr>
              <td colspan='2' style="width: 100%;text-align: center;" >
                <button class="btn btn-primary" (click)="updateSubject()">Save changes</button>
              </td>
            </tr>
          </table>
        </div>
        <div class="col-md-2"></div>
      </div>
  </div>

  </div>

  <div *ngIf = "delete">
    <div class = "row" style="width: 100%;">
      <h1 style="text-align: center;font-size: 40px;"> Delete a subject</h1>
    </div>
    <br/>
    <br/>
    <br/>
    <div class = "row" style="width: 100%;">
      <h1 style="text-align: center;font-size: 20px;"> Please enter the code of the subject you want to delete</h1>
    </div>
    <div class = "row" style="width: 100%;">
      <div class="col-md-3" style="text-align: center;">

      </div>
      <div class="col-md-6" style="text-align: left;color:black">
        <select class="form-select" [(ngModel)] = "deleteSubjectName" style="width: 100%;">
          <option value="null">Select your option</option>
          <option *ngFor ="let sub of subjects" [value]="sub.code">
            {{nameOf(sub.code)}}
          </option>
        </select>
      </div>
      <div class="col-md-3" style="text-align: center;">

      </div>
    </div>
    <br/>
    <div class = "row" style="width: 100%;">
      <div class="col-md-5" style="text-align: center;">

      </div>
      <div class="col-md-2" style="text-align: left;">
        <button class="btn btn-danger" style="width: 100%;" (click)="deleteSubject()">Delete this subject</button>
      </div>
      <div class="col-md-5" style="text-align: center;">

      </div>
    </div>
  </div>

  <div *ngIf = "stud">
    <div class="row" style="width: 100%;">
      <div class="col-md-2">

      </div>
      <div class="col-md-8">
        <table class="table table-dark">
          <tr>
            <td>Subject:</td>
            <td>
              <select class="form-select" [(ngModel)] = "sub_name" style="width: 100%;color:white">
                <option value="null">Select your option</option>
                <option *ngFor ="let sub of subjects" [value]="sub.code" style="color:white">
                  {{nameOf(sub.code)}}
                </option>
              </select>
            </td>
          </tr>
          <tr>
            <td>Student:</td>
            <td>
              <select class="form-select" [(ngModel)] = "stud_name" style="width: 100%;color:white">
                <option value="null">Select your option</option>
                <option *ngFor ="let sub of students" [value]="sub.username" style="color:white">
                  {{nameOfStudent(sub.username)}}
                </option>
              </select>
            </td>
          </tr>
          <tr>
            <td colspan="2" style="width: 100%;text-align: center;">
              <button class = "btn btn-primary" (click)="addStudentSubject()"> Add this student</button>
            </td>
          </tr>
        </table>
      </div>
      <div class="col-md-2">

      </div>
    </div>
  </div>

</div>

